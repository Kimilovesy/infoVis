<!DOCTYPE html>
<html>
<head>
	<link type="text/css" rel="stylesheet" href="style.css"/>
	<style type="text/css">

#states path {
  fill: #ccc;
  stroke: #fff;
}

circle {
  fill: #4682b4;
  fill-opacity: .8;
  stroke: #fff;
}

circle:hover{
	fill:#66a2d4;
	r:20;
}

#cells.voronoi path.cell {
  stroke: brown;
}

#cells g:hover path.arc {
  display: inherit;
}

#info {
	position:absolute;
	top:450px;
	left:20px;
}



  	</style>
</head>
<body>   
<div id="container">
    <div id="info">
    	<p id="airport"></p>
    	<p id="city"></p>
    </div>
    <script type="text/javascript" src="js/d3.js"></script>
    <script type="text/javascript" src="js/d3.csv.js"></script>
    <script type="text/javascript" src="js/d3.geo.js"></script>
    <script type="text/javascript" src="js/d3.geom.js"></script>	
	<!--
    <script src="https://d3js.org/d3.v3.js"></script>
	-->
    <script type="text/javascript">

var w = 1280,
    h = 800;

var projection = d3.geo.azimuthal()
    .mode("equidistant")
    .origin([-98, 35])
    .scale(1000)
    .translate([640, 400]);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("body").insert("svg:svg","#container")
    .attr("width", w)
    .attr("height", h);

var states = svg.append("svg:g")
    .attr("id", "states");

var cells = svg.append("svg:g")
    .attr("id", "cells");

var circles = svg.append("svg:g")
    .attr("id", "circles");

d3.json("data/us-states-2.json", function(collection) {
  states.selectAll("path")
    .data(collection.features)
    .enter().append("svg:path")
    .attr("d", path);
});



d3.csv("data/airports_28.csv", function(airports){

	var position = [];
	var iata = [];
	var airportName = [];
	var airportCity = [];

	for(var i=0;i<airports.length;i++){
		position.push([airports[i].longitude, airports[i].latitude]);
		iata.push(airports[i].iata);
		airportName.push(airports[i].name);
		airportCity.push(airports[i].city);

	}


	circles.selectAll("circle")
        .data(airports)
      	.enter()
      	.append("svg:circle")
        .attr("cx", function(d,i){
        	return projection([d.longitude, d.latitude])[0];})
        .attr("cy", function(d,i){
        	return projection([d.longitude, d.latitude])[1];})
        .attr("r",10)
        .on("mouseover", function(d,i){
        	d3.select("#airport").text(d.name);
        	d3.select("#city").text(d.city);
        });
        
});

	</script>
</div>
</body>
</html>

